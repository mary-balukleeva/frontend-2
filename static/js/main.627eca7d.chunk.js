(this["webpackJsonpfrontend-2"]=this["webpackJsonpfrontend-2"]||[]).push([[0],{14:function(e,t,a){e.exports={Header:"styles_Header__2KoFd",dates:"styles_dates__2hW3s",link:"styles_link__3mu6n"}},15:function(e,t,a){e.exports={WeatherInfo:"styles_WeatherInfo__oWZUq",info:"styles_info__1QSM5",addContainer:"styles_addContainer__mUP0u"}},21:function(e,t,a){e.exports={Cities:"styles_Cities___s9yl",titleWrapper:"styles_titleWrapper__1jEcw",city:"styles_city__3tDd7"}},22:function(e,t,a){e.exports={Search:"styles_Search__3o_5Q",searchInput:"styles_searchInput__2yLC4",autocompleteDropdownContainer:"styles_autocompleteDropdownContainer__3E1DW"}},23:function(e,t,a){e.exports={wrapper:"styles_wrapper__3dadQ",Week:"styles_Week__3v7ES",day:"styles_day__1enfZ"}},30:function(e,t,a){e.exports={marker:"styles_marker__6Cy6W",tooltip:"styles_tooltip__opSHf"}},39:function(e,t,a){e.exports=a(56)},44:function(e,t,a){},45:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),l=(a(44),a(45),a(11)),i=a(3),s=a(2),u=a(21),d=a.n(u),f=Object(s.b)((function(e){return{data:e.cities}}))((function(e){var t=e.data,a=Object(i.f)(),n=t.cities;return r.a.createElement("div",{className:d.a.Cities},r.a.createElement("div",{className:d.a.titleWrapper},r.a.createElement("h1",null,"Saved cities")),n&&n.map((function(e,t){return r.a.createElement("div",{className:d.a.city,key:t,onClick:function(){return function(e){return a.push("/location/".concat(e))}(e.formattedSuggestion.mainText)}},e.description)})))})),m=a(14),y=a.n(m),h=a(5),p=a(18),E=a.n(p),w=a(4),v=a(22),b=a.n(v),_=Object(s.b)(null,(function(e){return{selectCity:function(t){return e((a=t,function(e,t,n){Object(p.geocodeByAddress)(a.description).then((function(e){return Object(p.getLatLng)(e[0])})).then((function(t){var n=t.lat,r=t.lng;e({type:"select-city",payload:Object(w.a)({},a,{coords:{lat:n,lng:r}})})}))}));var a},loadForecast:function(t){return e((a=t,function(e,t,n){return e({type:"load-forecast"}),n.weather.fetchForecast(a).then((function(t){e({type:"successfully-load-forecast",payload:t})})).catch((function(t){e({type:"error-in-load-forecast",payload:t})}))}));var a}}}))((function(e){var t=e.selectCity,a=e.loadForecast,c=Object(i.f)(),o=Object(n.useState)(""),l=Object(h.a)(o,2),s=l[0],u=l[1];return r.a.createElement(E.a,{value:s,onChange:function(e){u(e)},onSelect:function(e,n,r){t(r),a(r.formattedSuggestion.mainText),c.push("/today")}},(function(e){var t=e.getInputProps,a=e.suggestions,n=e.getSuggestionItemProps,c=e.loading;return r.a.createElement("div",{className:b.a.Search},r.a.createElement("input",t({placeholder:"Search Places ...",className:b.a.searchInput})),r.a.createElement("div",{className:b.a.autocompleteDropdownContainer},c&&r.a.createElement("div",null,"Loading..."),a.map((function(e){var t=e.active?{backgroundColor:"#e5e3e3",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return r.a.createElement("div",Object.assign({},n(e,{style:t}),{key:e.placeId}),r.a.createElement("span",null,e.description))}))))}))})),g=Object(s.b)((function(e){return{cities:e.cities}}))((function(e){var t=e.cities.selectedCity;return r.a.createElement("header",{className:y.a.Header},r.a.createElement("div",{className:y.a.dates},r.a.createElement(l.b,{to:"/",className:y.a.link},"Home"),r.a.createElement(l.b,{to:"/today",className:y.a.link},"Today"),r.a.createElement(l.b,{to:"/tomorrow",className:y.a.link},"Tomorrow"),r.a.createElement(l.b,{to:"/week",className:y.a.link},"Week")),r.a.createElement("div",{className:"city"},t&&t.description),r.a.createElement("div",{className:"search-container"},r.a.createElement(_,null)))})),j=a(15),O=a.n(j),C=Object(s.b)((function(e){return{weatherState:e.weather}}),(function(e){return{addCity:function(){return e({type:"add-city"})}}}))((function(e){var t=e.location,a=e.weatherData,c=e.weatherState,o=e.addCity,l=Object(n.useState)(a),i=Object(h.a)(l,2),s=i[0],u=i[1],d=Object(n.useState)(!1),f=Object(h.a)(d,2),m=f[0],y=f[1],p=c.isLoading;return Object(n.useEffect)((function(){u(a)}),[a]),r.a.createElement("div",{className:O.a.WeatherInfo},p&&r.a.createElement("h1",null,"Loading..."),!p&&!s&&r.a.createElement("h1",null,"No data found"),!p&&s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:O.a.info},s.main.temp," \xb0C"),t&&r.a.createElement("div",{className:O.a.info},t),r.a.createElement("div",{className:O.a.info},s.weather[0].main,", Wind - ",s.wind.speed," ","meter per second"),r.a.createElement("button",{className:O.a.addContainer,onClick:function(){y(!0),setTimeout((function(){y(!1)}),2e3),o()}},m?"\u2713":"+")))})),k=function(e){var t=e.location,a=e.weatherData,n=e.children;return r.a.createElement("div",null,r.a.createElement(g,null),r.a.createElement(C,{weatherData:a,location:t}),n)},N=Object(s.b)((function(e){return{user:e.user,weatherData:e.weather}}),(function(e){return{detectUserCity:function(){return e((function(e,t,a){return e({type:"load-user-city"}),a.user.fetchUserLocation().then((function(t){e({type:"successfully-set-user-city",payload:t})})).catch((function(t){e({type:"error-in-user-city",payload:t})}))}))},loadWeather:function(t){return e((a=t,function(e,t,n){return e({type:"load-weather"}),n.weather.fetchToday(a).then((function(t){e({type:"successfully-load-weather",payload:t})})).catch((function(t){e({type:"error-in-load-weather",payload:t})}))}));var a}}}))((function(e){var t=e.user,a=e.weatherData,c=e.loadWeather,o=e.detectUserCity,l=t.city;return Object(n.useEffect)((function(){o()}),[o]),Object(n.useEffect)((function(){l&&c("".concat(l.city,",").concat(l.countryCode))}),[c,l]),r.a.createElement(k,{weatherData:a.weather,location:"".concat(null===l||void 0===l?void 0:l.city,", ").concat(null===l||void 0===l?void 0:l.countryCode)},r.a.createElement(f,null))})),D=a(10),W=a.n(D),S=a(9),M=a.n(S),x=a(38),L=a(30),I=a.n(L),T=Object(s.b)((function(e){return{weather:e.weather}}),(function(e){return{loadCurrentWeather:function(t){return e((a=t,function(e,t,n){return e({type:"load-current-weather"}),n.weather.fetchToday(a).then((function(t){e({type:"successfully-load-current-weather",payload:t})})).catch((function(t){e({type:"error-in-load-current-weather",payload:t})}))}));var a}}}))((function(e){var t=e.city,a=e.weather,c=e.loadCurrentWeather,o=Object(n.useState)(!1),l=Object(h.a)(o,2),i=l[0],s=l[1],u=a.currentWeather;return Object(n.useEffect)((function(){t&&c(t.formattedSuggestion.mainText)}),[c,t]),r.a.createElement("div",{className:I.a.marker,onClick:function(){return s(!0)}},i&&r.a.createElement("div",{className:I.a.tooltip},r.a.createElement("div",null,u.main.temp," \xb0C"),r.a.createElement("div",null,"Feels like ",u.main.feels_like," \xb0C"),r.a.createElement("div",null,u.weather[0].main,", Wind -"," ",u.wind.speed," meter per second")))})),U=Object(s.b)((function(e){return{city:e.cities}}),(function(e){return{detectUserCity:function(){return e((function(e,t,a){return e({type:"load-user-city"}),a.user.fetchUserLocation().then((function(t){e({type:"successfully-set-user-city",payload:t})})).catch((function(t){e({type:"error-in-user-city",payload:t})}))}))}}}))((function(e){var t=e.day,a=e.forecast,c=e.city,o=e.detectUserCity;Object(n.useEffect)((function(){o()}),[o]),Object(n.useEffect)((function(){c.selectedCity&&c.selectedCity.coords&&u(c.selectedCity.coords)}),[c]);var l=Object(n.useState)({lat:0,lng:0}),i=Object(h.a)(l,2),s=i[0],u=i[1],d=[];return r.a.createElement("div",{className:M.a.DayInfo},r.a.createElement("div",{className:M.a.infoBlock},r.a.createElement("h1",{className:M.a.day},t),r.a.createElement("div",null,function(){switch(t){case"today":return d=a.filter((function(e){return e.dt_txt.match(W()().format("YYYY-MM-DD"))})),W()().format("MMMM, DD");case"tomorrow":return d=a.filter((function(e){return e.dt_txt.match(W()().add(1,"days").format("YYYY-MM-DD"))})),W()().add(1,"days").format("MMMM, DD");default:return W()().format("MMMM, DD")}}()),r.a.createElement("table",{className:M.a.table},r.a.createElement("thead",null,r.a.createElement("tr",{className:M.a.row},r.a.createElement("th",{className:M.a.cell},"Time"),r.a.createElement("th",{className:M.a.cell},"Weather"))),r.a.createElement("tbody",null,d&&d.map((function(e){return r.a.createElement("tr",{className:M.a.row,key:e.dt},r.a.createElement("td",{className:M.a.cell},W()(e.dt_txt).format("HH:mm")),r.a.createElement("td",{className:M.a.cell},e.main.temp," \xb0C,"," ",e.weather[0].main,", Wind -"," ",e.wind.speed," meter per second"))}))))),r.a.createElement("div",{className:M.a.mapBlock},r.a.createElement(x.a,{bootstrapURLKeys:{key:"AIzaSyBmot9iwEiK50ao3hYSUo1keYEazeNrth8"},center:s,defaultZoom:12},r.a.createElement(T,{lat:s.lat,lng:s.lng,city:c.selectedCity}))))})),Y=Object(s.b)((function(e){return{weather:e.weather}}))((function(e){var t=e.weather;return r.a.createElement(k,{weatherData:t.forecast[0]},r.a.createElement(U,{day:"today",forecast:t.forecast}))})),P=Object(s.b)((function(e){return{weather:e.weather}}))((function(e){var t=e.weather;return r.a.createElement(k,{weatherData:t.forecast[1]},r.a.createElement(U,{day:"tomorrow",forecast:t.forecast}))})),B=a(23),F=a.n(B),H=function(e){var t=e.forecast,a=e.location;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:F.a.wrapper},r.a.createElement("h1",null,"Week"),r.a.createElement("div",null,W()().format("MMMM, DD")," -"," ",W()().add(5,"days").format("MMMM, DD"))),r.a.createElement("div",{className:F.a.Week},t.map((function(e){return r.a.createElement("div",{className:F.a.day,key:e.dt},W()(e.dt_txt).format("DD-MM-YYYY"),r.a.createElement(C,{weatherData:e,location:a}))}))))},A=Object(s.b)((function(e){return{weather:e.weather,cities:e.cities}}))((function(e){var t=e.weather,a=e.cities,n=t.forecast.filter((function(e){return e.dt_txt.match("15:00")}));return r.a.createElement(k,{weatherData:t.forecast[0]},r.a.createElement(H,{forecast:n,location:a.selectedCity?a.selectedCity.description:""}))})),J=Object(s.b)((function(e){return{weather:e.weather}}),(function(e){return{loadCityWeather:function(t){return e((a=t,function(e,t,n){return e({type:"load-city-weather"}),n.weather.fetchToday(a).then((function(t){e({type:"successfully-load-city-weather",payload:t})})).catch((function(t){e({type:"error-in-load-city-weather",payload:t})}))}));var a}}}))((function(e){var t=e.weather,a=e.loadCityWeather,c=Object(i.g)().city,o=t.forecast,l=t.cityWeather;return Object(n.useEffect)((function(){a(c)}),[a,c]),r.a.createElement(k,{weatherData:l,location:c},r.a.createElement(U,{day:"today",forecast:o}))}));var Q=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(l.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/today",exact:!0},r.a.createElement(Y,null)),r.a.createElement(i.a,{path:"/tomorrow",exact:!0},r.a.createElement(P,null)),r.a.createElement(i.a,{path:"/week",exact:!0},r.a.createElement(A,null)),r.a.createElement(i.a,{path:"/location/:city?"},r.a.createElement(J,null)),r.a.createElement(i.a,{path:"/",exact:!0},r.a.createElement(N,null)))))},q=a(13),z=a(34),K=a(35),Z=a(36),G=new(function(){function e(){Object(K.a)(this,e)}return Object(Z.a)(e,[{key:"call",value:function(e,t,a,n){var r=a.headers||{},c=localStorage.getItem("token");return c&&(r.Authorization=c),a.headers=r,a.method=t,fetch(e,a).then((function(e){var t,a=e.headers.get("Content-type");return t=a&&"application/json"===a?e.json():e.text(),Promise.all([t,e.status])})).then((function(e){var t=Object(h.a)(e,2),a=t[0],n=t[1],r=JSON.parse(a);return 401===n?Promise.reject(r):200===n?r:void 0}))}},{key:"get",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.call(e,"GET",a,t)}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t&&(a.body=JSON.stringify(t),a.headers={"Content-Type":"application/json"}),this.call(e,"POST",a)}},{key:"put",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t&&(a.body=JSON.stringify(t),a.headers={"Content-Type":"application/json"}),this.call(e,"PUT",a)}},{key:"delete",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.call(e,"DELETE",a)}}]),e}()),R=function(e){return"".concat(e,"&units=metric&APPID=").concat("7def78105b07833a50b4ca387bb40773")},X={user:{fetchUserLocation:function(){return G.get("http://ip-api.com/json")}},weather:{fetchToday:function(e){return G.get(R("".concat("https://api.openweathermap.org/data/2.5","/weather?q=").concat(e)))},fetchForecast:function(e){return G.get(R("".concat("https://api.openweathermap.org/data/2.5","/forecast?q=").concat(e)))}}},V=a(37),$={selectedCity:null,cities:[]},ee={city:null,isLoading:!1},te={isLoading:!1,weather:null,forecast:[],cityWeather:null,currentWeather:null},ae=Object(q.c)({cities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"select-city":return Object(w.a)({},e,{selectedCity:n});case"add-city":return Object(w.a)({},e,{cities:[].concat(Object(V.a)(e.cities),[e.selectedCity])});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"load-user-city":return Object(w.a)({},e,{isLoading:!0});case"successfully-set-user-city":return Object(w.a)({},e,{city:n,isLoading:!1});case"error-in-user-city":return Object(w.a)({},e,{isLoading:!1});default:return e}},weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"load-weather":case"load-forecast":case"load-city-weather":case"load-current-weather":return Object(w.a)({},e,{isLoading:!0});case"successfully-load-weather":return Object(w.a)({},e,{weather:n,isLoading:!1});case"successfully-load-forecast":return Object(w.a)({},e,{forecast:n.list,isLoading:!1});case"successfully-load-city-weather":return Object(w.a)({},e,{cityWeather:n,isLoading:!1});case"successfully-load-current-weather":return Object(w.a)({},e,{currentWeather:n,isLoading:!1});case"error-in-load-weather":case"error-in-load-forecast":case"error-in-load-city-weather":case"error-in-load-current-weather":return Object(w.a)({},e,{isLoading:!1});default:return e}}});var ne=Object(q.d)(ae,Object(q.a)(z.a.withExtraArgument(X)));o.a.render(r.a.createElement(s.a,{store:ne},r.a.createElement(Q,null)),document.getElementById("root"))},9:function(e,t,a){e.exports={DayInfo:"styles_DayInfo__3nISN",infoBlock:"styles_infoBlock__2g628",day:"styles_day__3qgQr",table:"styles_table__3RUkG",row:"styles_row__y08Ud",cell:"styles_cell__1yzEX",mapBlock:"styles_mapBlock__1QnuX"}}},[[39,1,2]]]);
//# sourceMappingURL=main.627eca7d.chunk.js.map